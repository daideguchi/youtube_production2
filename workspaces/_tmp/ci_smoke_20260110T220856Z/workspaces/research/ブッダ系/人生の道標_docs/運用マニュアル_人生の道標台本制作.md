# 運用マニュアル: 人生の道標 台本制作フロー
最終更新: 2025-12-31
参照リソース: `学習整理_人生の道標.md`, `高品質台本生成ワークフロー.md`, `scripts/ch01/` 配下スクリプト

## 0. 準備チェック
- 企画データ: `2025_人生の道標企画 - 企画.csv`
- 学習ログ/ベンチマーク: `学習整理_人生の道標.md`, `ベンチマーク_逆転の一言_観察メモ.md`
- スクリプト: `scripts/ch01/generate_prompt_input.py`, `scripts/ch01/check_script.py`
- ドラフト資材: 直近の台本（例: `187.txt`）

## 1. インプットテンプレ生成（CSV連携の自動化）
1. ターミナルでプロジェクトルートへ移動。
2. 下記コマンドを実行して CSV からテンプレを出力:
   ```bash
   python3 scripts/ch01/generate_prompt_input.py \
     --csv "workspaces/planning/channels/CH01.csv" \
     --video-id CH01-251 \
     --reference "バズった台本４（受け流す技術）" \
     --teaching "口業/正語/忍辱" \
     --historical-episodes "織田信長と明智光秀（言葉の刃）" \
     --avoid-topics "架空の現代人物ストーリー、人物紹介（「姓名、年齢(歳/才)。」の単独行）で開始" \
     --constraints "6000-8000字相当"
   ```
3. 出力されたテンプレを、そのまま本文生成担当LLMへ渡す（`packages/script_pipeline/prompts/channels/CH01.yaml` の禁止事項を破らないこと）。
4. ラフと本稿は必ず別ファイル名で管理（例: `188_rough.txt` → `188_2.txt` → `188.txt`）。ラフを既存ファイルに上書きしない。

## 2. プロンプト投入〜台本生成
1. 生成したインプットを本文生成担当LLMへ渡し、**Aテキスト本文のみ**を出させる（要約/アウトライン/チェックリストは不要）。
2. CH01は **架空の現代人物ストーリー禁止**。史実・逸話を1〜2件に絞り、断定は避ける。
3. 音読/TTSチェックを行い、言いづらい箇所だけを最小修正する。

## 3. ベンチマーク参照 + 呼吸・間の取り込み
1. `ベンチマーク_逆転の一言_観察メモ.md` のチェックリストに沿って動画を視聴。
2. 呼吸/無音の秒数をメモし、今回の台本のステージディレクションに転用。
3. 新たに気づいた演出は `学習整理` セクション4 or 7に追記。

## 4. 台本セルフチェック自動化
1. 台本完成後、`scripts/ch01/check_script.py` を実行（主語チェックに名前が必要なら史実人物名を `--names` で渡す）。
2. 出力 `==== 語尾多様化チェック ====` で NG が出た箇所を修正。
3. 主語警告が出た段落は、**架空人物名を追加しない**。代わりに「私たち/あなた/人は」等で主語を補うか、文章を短くして主語を明確にする。
4. `say -f <file>` 等で音声確認し、言いづらい箇所・テンポ崩れをメモして修正。

## 5. 完了ログとナレッジ反映
1. 修正が終わったら `学習整理_人生の道標.md` のセクション7「今後の活用/To-Do」に学びを追記。
2. 新リソース（本マニュアル、観察メモ、スクリプト）をリスト化し、更新日を必ず記載。
3. 次の台本に活かせるチェック項目が増えた場合は、CH01プロンプト（`packages/script_pipeline/prompts/channels/CH01.yaml`）へ反映する。

## 6. モデル運用（概要）
- 本文生成は「自然な日本語が得意なモデル」を推奨（例: Claude系）。
- **Codex（この環境）に本文執筆をさせない**（事故防止）。CodexはQA/差分確認/ファイル操作に限定する。

## 7. チェックボット化の方向性
- 現状スクリプト: 語尾/主語の静的チェックを自動化済み。
- 追加候補: `check_script.py` に句読点リズム・台詞長チェックを実装する、または Git hook化して保存時に実行。
- CI連携: `python3 scripts/ch01/check_script.py <Aテキスト>` をフックに組み込み、成果物提出前に必ず実行するルールを設定（`--names` は必要時のみ）。

## 8. 付録: よく使うコマンド
| 目的 | コマンド |
| --- | --- |
| CSVからインプット生成 | `python3 scripts/ch01/generate_prompt_input.py --csv workspaces/planning/channels/CH01.csv --video-id CH01-251 --historical-episodes "...（1〜2件）"` |
| 台本チェック | `python3 scripts/ch01/check_script.py workspaces/scripts/CH01/251/content/assembled.md` |
| 逆転メモ参照 | `open ベンチマーク_逆転の一言_観察メモ.md` (GUI環境の場合) |

このマニュアルを更新した場合は、更新履歴と日付を冒頭に追記してください。
