schema_version: 1

# LLM model selection by numeric slot (operator-friendly).
#
# Goal:
# - Prevent "model name rewrites" in configs by making runtime selection numeric.
# - Slot 0 is the default "main routing" (current ops default: OpenRouter).
#
# Usage:
# - Default (slot 0): no env needed
# - Force slot: LLM_MODEL_SLOT=2 ./scripts/with_ytm_env.sh python3 ...
# - Slot指定時は strict 扱いで、デフォルトでは `force_models` の先頭1つだけを試す
#   （複数モデルを試したい場合は呼び出し側で `allow_fallback=True` を明示）
#
# Notes:
# - Slot routing applies to all text/chat tasks (tier-based). `image_gen` is not overridden.
# - `script_*` tasks must STOP on API failure (no THINK failover); enforced in code.
default_slot: 0

slots:
  0:
    label: openrouter_main
    description: OpenRouterを主線（デフォルト）。tierごとに1モデル固定。
    tiers:
      heavy_reasoning:
        - txt-main-hr-1
      standard:
        - txt-main-std-1
      cheap:
        - txt-main-cheap-1
      vision_caption:
        - txt-vision-caption-1
      web_search:
        - txt-web-search-1
      master_plan_opus:
        - txt-master-plan-opus-1
    # Script tasks are special:
    # - 通常運用では「Fireworks (text) は使わない」前提に寄せる。
    # - そのため slot 0 でも script_* は OpenRouter に固定する（失敗時は停止。THINKへは行かない）。
    script_allow_openrouter: true
    script_tiers:
      heavy_reasoning:
        - open-kimi-thinking-1
      standard:
        - open-kimi-thinking-1
      cheap:
        - open-kimi-thinking-1
      master_plan_opus:
        - open-kimi-thinking-1

  1:
    label: openrouter_kimi_all
    description: OpenRouter Kimi K2 Thinking を全tierに固定（高品質/高コスト）。
    tiers:
      heavy_reasoning:
        - open-kimi-thinking-1
      standard:
        - open-kimi-thinking-1
      cheap:
        - open-kimi-thinking-1
      master_plan_opus:
        - open-kimi-thinking-1
    script_allow_openrouter: true

  2:
    label: openrouter_mistral_all
    description: OpenRouter Mistral(Free) を全tierに固定（低コスト/短文向け）。
    tiers:
      heavy_reasoning:
        - open-mistral-7b-free-1
      standard:
        - open-mistral-7b-free-1
      cheap:
        - open-mistral-7b-free-1
      master_plan_opus:
        - open-mistral-7b-free-1
    script_allow_openrouter: true

  3:
    label: fireworks_deepseek_v3_2
    description: Fireworks DeepSeek v3.2 exp（クレジット有効時のみ）。
    tiers:
      heavy_reasoning:
        - fw-deepseek-v3p2-exp-1
      standard:
        - fw-deepseek-v3p2-exp-1
      cheap:
        - fw-deepseek-v3p2-exp-1
      master_plan_opus:
        - fw-deepseek-v3p2-exp-1

  4:
    label: fireworks_glm_4p7
    description: Fireworks GLM 4.7（比較/非常時）。
    tiers:
      heavy_reasoning:
        - fw-glm-4p7-1
      standard:
        - fw-glm-4p7-1
      cheap:
        - fw-glm-4p7-1
      master_plan_opus:
        - fw-glm-4p7-1

  5:
    label: fireworks_mixtral_8x22b
    description: Fireworks Mixtral 8x22B Instruct（比較用）。
    tiers:
      heavy_reasoning:
        - fw-mixtral-8x22b-1
      standard:
        - fw-mixtral-8x22b-1
      cheap:
        - fw-mixtral-8x22b-1
      master_plan_opus:
        - fw-mixtral-8x22b-1
