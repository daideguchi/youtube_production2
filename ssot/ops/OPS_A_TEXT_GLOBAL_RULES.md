# OPS_A_TEXT_GLOBAL_RULES — 全チャンネル共通の「読み台本（Aテキスト）」執筆ルール（SSOT）

目的:
- このリポジトリの台本は **AIナレーション用の読み台本（Aテキスト）** として使われる。
- 視聴者が **ストレスなく聴き続けられる** ことを最優先に、全チャンネル共通の “書き方の下限品質” を固定する。

適用範囲（強制）:
- `workspaces/scripts/{CH}/{NNN}/content/assembled_human.md`（正本）および `assembled.md`（ミラー）
- 新規生成・リライト・拡張・修正のすべて（CH別プロンプトより優先）

関連:
- SoT/入力: `ssot/ops/OPS_SCRIPT_SOURCE_MAP.md`
- 台本運用: `ssot/ops/OPS_SCRIPT_GUIDE.md`
- 音声/TTS: `ssot/reference/【消さないで！人間用】確定ロジック.md`

---

## 1) 最重要ルール（音声品質の下限）

### 1.1 ポーズ挿入の唯一の記号
- **ポーズ挿入として許可される記号は `---` のみ**。
- `---` は **1行単独**で置く（前後は改行）。意味の切れ目（話題転換/場面転換/呼吸の区切り）にだけ使う。
- `---` は **セクションが切り替わる境界**（設計図/構成上の区切り）で置く（TTS側の0.5秒ポーズに対応）。
- `---` の過剰使用は **機械的等間隔分割** の疑いが強く、視聴者の没入を壊す。  
  非・睡眠チャンネルでは `---` 行が **15 を超える場合は不合格**（`script_validation` error: `too_many_pause_lines`）。
- 音声側の解釈（strict）:
  - 通常のつなぎは **0.1秒**（デフォルト）
  - `---` は **0.5秒**の無音ポーズ
  - 空行/改行はポーズ指示として扱わない（整形のために入れてもよい）
- `***` や `___`、`///`、`===` 等の区切り記号は使用しない（音声の不自然な途切れや事故の原因）。

### 1.2 記号・括弧の過剰使用を禁止（TTSが不自然に切れやすい）
- `「」` / `『』` と `（）` は **多用しない**。会話は地の文（間接話法）で書き、セリフ（発話）のみ短く `「」` を使う。
- 引用は `「」` / `『』` を使わず、地の文で言い換える（例: “ある人はこう言いました” の形）。
- `「」` は **セリフ（発話）に限る**。用語の強調・概念のラベル付け（例: `「老い」とは…`）には使わない。
- warningしきい値（TTS事故防止）: 1本あたり `「」` / `『』` は **合計20個（10組）以内**、`（）` は **合計10個（5組）以内**。超える場合は意味を保ったまま言い換える。
- 運用上の扱い: このしきい値は **ハード上限ではない**（超過しても自動で不合格にしない）。`script_validation` では warning として記録し、**対話型AIエージェントが「多用しすぎ」を判断**する。
  - 参照値は `configs/sources.yaml` の `script_globals.a_text_quote_marks_max` / `script_globals.a_text_paren_marks_max`。チャンネル別に上書きする場合は `channels.CHxx.a_text_quote_marks_max` / `channels.CHxx.a_text_paren_marks_max` を設定する。
  - 引用符/括弧を「多用上限に合わせる目的」で機械的に剥がして合格扱いに落とす運用はしない（意味・トーンが変わりうるため）。
  - 例外（セリフ以外の `「」` 対策）: `「短い用語」` のような **用語強調/概念ラベル** は `script_validation` の決定論クリーナで括弧を外してよい（セリフの引用符は触らない）。
- 会話の連打でテンポを作らない。台詞を入れる場合は **短く**、地の文に溶かし込む。
- ルビ/読み仮名/注釈目的の括弧は禁止（読み上げが破綻しやすい）。

### 1.3 視聴者ストレスを生む文章を禁止
- 淡々とした繰り返し構文、同じ言い回しの連発、蛇足の比喩、回りくどい前置き、過剰な煽りを避ける。
- 断定・説教・脅し・人格否定はしない。事実と提案に落とす。
- “言い換えで水増し” をしない。厚みは **具体の追加**で作る（状況・行動・心の動き・結果）。
- **同一段落の丸ごと重複は禁止**（コピー/生成ループ由来の反復）。  
  不合格条件（機械チェック）: 120文字以上の段落が同一（空白差を無視して一致）なら不合格。

### 1.4 捏造・虚構の禁止（信頼を壊さない）
- 統計・割合（`％` / `パーセント`）は **表記自体は許容**。ただし、根拠のない数字/研究結果/大学名/研究所名/論文/実験の作り話を本文に書かない。
- 事実確認ができない固有名詞や数値は使わず、一般化して述べる（例: “研究では〜” の断定や数字は避ける）。
- 科学/医学の橋渡しは、**安全な一般論を短く1段落**に留める（呼吸と緊張、書くことと客観視など）。数字・機関名・論文名は出さない。

### 1.5 「字数合格だけ」を禁止（LLM品質ゲート必須）
- 文字数や禁則がOKでも、内容が薄い/冗長/流れが不自然なら **不合格**とする。
- フロー/自然さの合否は **機械的ルールではなく推論モデルの判定（LLM Judge）**で担保する。
- 運用の正本: `ssot/ops/OPS_A_TEXT_LLM_QUALITY_GATE.md`（Judge→Fixer の2段階で最終品質を固定）。
- 文字数の扱い:
  - `target_chars_min` は「目標」。`script_validation` は **80%未満をハードエラー**、**80%以上は warning**（多少の不足は許容）として扱う。

### 1.6 終わり方（未完を禁止）
- Aテキストは **最後まで完結**していること（途中で切れて終わるのは不合格）。
- 検知条件（機械チェック）:
  - 最後の有効文字が `。` / `！` / `？` / `!` / `?` / `」` / `』` などで閉じている。
  - 助詞や語尾の途中（例: `〜になり` / `〜で` / `〜が`）で止まらない。
- これは「決まり文句を入れろ」ではなく、**ぶつ切り事故（生成途中で止まる）を確実に検知して止める**ためのルール。

### 1.7 文字の健全性（外字/制御文字を禁止）
- `�`（U+FFFD, Unicode replacement character）が混入している場合は不合格（コピー事故/文字化けの典型）。
- 目に見えない制御/整形文字（例: ゼロ幅スペース等）や、私用領域（PUA）等の特殊文字が混入している場合は不合格。
- 明らかな誤字・外字が検出された場合は不合格（TTSの読み崩れ/視聴者ストレスの原因）。  
  既知の混入パターンは `script_validation` の決定論クリーナで **置換修復**する（全文リライトは禁止）。

---

## 2) Aテキストの禁止事項（混入事故を根絶）

台本本文（Aテキスト）に入れない:
- **睡眠誘導フレーミング（非・睡眠チャンネル）**  
  - 例: `寝落ち/睡眠用/安眠/眠りへ誘う/布団に入る前に/ゆっくりお休みください/おやすみなさい` など、視聴スタイルを「眠る前提」に固定する文脈。  
  - 判定（運用SSOT）: チャンネルの `youtube_description` / `default_tags` に `#睡眠用` または `#寝落ち` が **含まれない** 場合は不合格（`script_validation` で検出）。  
  - 例外: 物語上の行動として「寝る」「布団」等が一度出ること自体は許容しうるが、**視聴者への睡眠誘導（締め/呼びかけ/使い方の提示）**は不可。
- URL（`http(s)://` / `www.`）
- 出典メタ、脚注、参照リンク、引用番号（例: `[13]` / `([xxx][13])`）
- 箇条書き/番号/記号リスト（`-` / `・` / `1.` / `A.` 等）
- **読みアノテーションの併記**（例: `刈羽郡、かりわぐん` / `大河内正敏（おおこうちまさとし）`）
- アウトライン由来のメタ（例: `約600字`、`A. 見出し - 約600字` などの「字数メモ」）
- Markdown装飾（例: `**太字**`）
- 設定/CSVデータ/構成案/プロット等の **制作メモの貼り付け**（例: `設定` 見出し＋ `主人公: ...` の羅列）
- エピソード見出し行（例: `CH23-001: ...`）
- タイムスタンプ、チャプター表、制作裏（AI/収録/台本などのメタ言及）
- 章立てメタ（例: `第3章` / `第3章を始めましょう` のような“章見出し”）
- 内部テンプレトークン/マーカー（例: `<<<YTM_FINAL>>>` / `<<<PAUSE_1>>>` / `<<SOME_TOKEN>>`）

※出典は本文ではなく `content/analysis/research/references.json` 等の research 側へ集約する。

補足（既知の救済）:
- LLM 出力が内部マーカーを混入することがある（例: `<<<YTM_FINAL>>>`）。`script_validation` のサニタイザで **行単独の `<<<TOKEN>>>` を除去**し、`<<<PAUSE_n>>>` は `---` に変換して救済する。

---

## 3) 読みやすさ（耳で理解できる最小設計）

- 1段落は1話題。2〜4文に収め、詰め込みすぎない。
- 1文は長くしすぎない（息継ぎできる長さ）。主語が迷子にならないように整える。
- 専門語は最小限。出すなら直後にやさしい言い換えを添える（定義の長話はしない）。
- 比喩は “一度で伝わる短さ” に限定し、連打しない。

---

## 4) チャンネル別ルールとの優先順位（衝突時の扱い）

1. 本書（全チャンネル共通のAテキスト品質）  
2. チャンネル固有の `script_prompt.txt` / Persona / 企画CSV  
3. 作業メモ・一時指示

補足:
- チャンネル `script_prompt.txt` に構成/形式/記号の指示が混ざっていても、Aテキスト向けLLM呼び出しでは衝突しやすい要素を落とした `a_text_channel_prompt`（派生）を用いる。骨格は `ssot/ops/OPS_SCRIPT_PATTERNS.yaml` が正本。

例外が必要な場合:
- チャンネル固有の理由と例外条件を **SSOTに明記**してから適用する（無断で例外を増やさない）。
